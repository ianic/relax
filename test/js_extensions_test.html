<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>JavaScript unit test file</title>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="../stylesheets/unittest.css" type="text/css" />  
  
  <script src="../vendor/prototype/prototype.js"     type="text/javascript"></script>      
  <script src="../vendor/prototype/scriptaculous.js" type="text/javascript"></script>      
  <script src="../vendor/prototype/unittest.js"      type="text/javascript"></script> 
  
  <script src="../lib/js_extensions/string.js"       type="text/javascript"></script> 
  <script src="../lib/js_extensions/number.js"       type="text/javascript"></script> 
  <script src="../lib/js_extensions/date.js"         type="text/javascript"></script>                                                                                       
              
</head>
<body>

<div id="content">
  <div id="header">
    <h1>Js Extensions unit tests</h1>
  </div>                                        
  <div id="testlog"> </div>  
</div>
             
<script>

  new Test.Unit.Runner({         
                
    setup: function() { 
    },  
           
    teardown: function() {},
    
    testNumberToCurrency: function() { with(this) {                          
      assertEqual('234', (234).toCurrency());                         
      assertEqual('1.234', 1234.0.toCurrency());                       
      assertEqual('1.234,5', 1234.5.toCurrency());                       
      assertEqual('1.234,56', 1234.56.toCurrency());
      assertEqual('1.234,567', 1234.567.toCurrency());
    }},
    
    testStringToNumber: function() { with(this) {
      assertEqual(123, '123'.toNumber());
      assertEqual(123.23, '123,23'.toNumber());
      assertEqual(123.23, '123.23'.toNumber());                                               
      assertEqual(1234.23, '1.234,23'.toNumber());
      assertEqual(1234567.23, '1.234.567,23'.toNumber());
      assertEqual(1234567.23, '1.234.567.23'.toNumber());
      assertEqual(1234567.23, '1,234,567,23'.toNumber());
    }},
    
    testStringIsJsonDate: function() {with(this){
      assert(!"pero".isJSONDate());               
      assert(!"2009-07-31".isJSONDate());
      assert(!"2009-07-31T11:22:3aZ".isJSONDate());
      
      assert("2009-07-31T00:00:00Z".isJSONDate());
      assert("2009-07-31T11:22:33Z".isJSONDate());      
    }},
    
    testDateFromJson: function() {with(this){
      assertEqual((new Date(2009, 06, 31)).getTime(), Date.fromJSON("2009-07-31T00:00:00Z").getTime());
      assertNull(Date.fromJSON("2009-07-31T00:00:0Z"));
      assertNull(Date.fromJSON("something"));
    }},                                  
    
    testStringToDate: function() {with(this){
      assertEqual((new Date(2009, 06, 31)).getTime(), "2009-07-31T00:00:00Z".toDate().getTime());      
      assertNull("something".toDate());
    }}
                                                                       
    
  }, "Test");  
  
</script>
</body>
</html>